import{r as d,j as e}from"./index-B5h6h-9G.js";import{q as V,r as G,k as E,j as X,d as A}from"./index-CT37Nhcl.js";import{M as Q}from"./MainLayout-BRnvQjCK.js";import{p as R}from"./api-BvRtX8cY.js";import"./Footer-CePHxLkd.js";function Z(){const[f,k]=d.useState([]),[t,S]=d.useState(null),[r,o]=d.useState([{id:1,name:"",size:"M",quantity:1}]),[l,T]=d.useState({className:"",schoolName:"",contactPerson:"",phone:"",email:"",address:"",notes:""}),[p,C]=d.useState("manual");d.useEffect(()=>{q()},[]);const q=async()=>{try{const n=(await R.getAll()).data;k(n),n.length>0&&S(n[0])}catch(s){console.error("Lá»—i khi táº£i sáº£n pháº©m:",s)}},D=s=>{const n=f.find(a=>a.id===parseInt(s));S(n)},F=()=>{o([...r,{id:Date.now(),name:"",size:"M",quantity:1}])},I=s=>{r.length>1&&o(r.filter(n=>n.id!==s))},j=(s,n,a)=>{o(r.map(m=>m.id===s?{...m,[n]:a}:m))},i=(s,n)=>{T({...l,[s]:n})},g=s=>s>=50?.15:s>=30?.1:s>=20?.08:s>=10?.05:0,c=()=>r.reduce((s,n)=>s+(parseInt(n.quantity)||0),0),u=()=>{const s=c();return t?t.price*s:0},x=()=>{const s=u(),n=c(),a=g(n);return s*a},w=()=>u()-x(),h=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s),M=()=>{const s=`STT,Há» vÃ  TÃªn,Size,Sá»‘ LÆ°á»£ng
1,Nguyá»…n VÄƒn A,M,1
2,Tráº§n Thá»‹ B,L,1`,n=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download="mau-dat-hang-so-luong-lon.csv",a.click()},H=s=>{const n=s.target.files[0];if(n){const a=new FileReader;a.onload=m=>{const L=m.target.result.split(`
`).slice(1).filter(v=>v.trim()).map((v,P)=>{const[,N,b,y]=v.split(",");return{id:Date.now()+P,name:(N==null?void 0:N.trim())||"",size:(b==null?void 0:b.trim())||"M",quantity:parseInt(y==null?void 0:y.trim())||1}});L.length>0&&o(L)},a.readAsText(n)}},z=()=>{const s={};return r.forEach(n=>{const a=n.size;s[a]=(s[a]||0)+(parseInt(n.quantity)||0)}),s},O=s=>{if(s.preventDefault(),!t){alert("Vui lÃ²ng chá»n sáº£n pháº©m!");return}if(c()===0){alert("Vui lÃ²ng nháº­p sá»‘ lÆ°á»£ng Ä‘áº·t hÃ ng!");return}if(!l.contactPerson||!l.phone){alert("Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin liÃªn há»‡!");return}const n={product:t,items:r,contactInfo:l,summary:{totalQuantity:c(),subtotal:u(),discount:x(),total:w(),sizeSummary:z()},orderDate:new Date().toISOString()};console.log("Order data:",n),alert("ÄÆ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng! ChÃºng tÃ´i sáº½ liÃªn há»‡ vá»›i báº¡n sá»›m nháº¥t."),o([{id:1,name:"",size:"M",quantity:1}]),T({className:"",schoolName:"",contactPerson:"",phone:"",email:"",address:"",notes:""})};return e.jsx(Q,{children:e.jsxs("div",{className:"bulk-order-page",children:[e.jsx("div",{className:"bulk-hero",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Äáº·t HÃ ng Sá»‘ LÆ°á»£ng Lá»›n"}),e.jsx("p",{children:"DÃ nh cho Ä‘Æ¡n hÃ ng tá»« 10 sáº£n pháº©m trá»Ÿ lÃªn - Giáº£m giÃ¡ Ä‘áº·c biá»‡t"}),e.jsxs("div",{className:"discount-badges",children:[e.jsxs("div",{className:"discount-badge",children:[e.jsx("span",{className:"qty",children:"10-19 sáº£n pháº©m"}),e.jsx("span",{className:"percent",children:"Giáº£m 5%"})]}),e.jsxs("div",{className:"discount-badge",children:[e.jsx("span",{className:"qty",children:"20-29 sáº£n pháº©m"}),e.jsx("span",{className:"percent",children:"Giáº£m 8%"})]}),e.jsxs("div",{className:"discount-badge",children:[e.jsx("span",{className:"qty",children:"30-49 sáº£n pháº©m"}),e.jsx("span",{className:"percent",children:"Giáº£m 10%"})]}),e.jsxs("div",{className:"discount-badge highlight",children:[e.jsx("span",{className:"qty",children:"Tá»« 50 sáº£n pháº©m"}),e.jsx("span",{className:"percent",children:"Giáº£m 15%"})]})]})]})}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"bulk-order-container",children:e.jsx("form",{onSubmit:O,children:e.jsxs("div",{className:"bulk-order-grid",children:[e.jsxs("div",{className:"order-details",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:"1. Chá»n Sáº£n Pháº©m"}),e.jsxs("div",{className:"product-selector",children:[e.jsx("select",{value:(t==null?void 0:t.id)||"",onChange:s=>D(s.target.value),className:"product-select",children:f.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",h(s.price)]},s.id))}),t&&e.jsxs("div",{className:"product-preview",children:[e.jsx("img",{src:t.image,alt:t.name}),e.jsxs("div",{className:"product-info",children:[e.jsx("h4",{children:t.name}),e.jsxs("p",{className:"price",children:[h(t.price),"/sáº£n pháº©m"]}),e.jsx("p",{className:"category",children:t.category})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:"2. Danh SÃ¡ch Äáº·t HÃ ng"}),e.jsxs("div",{className:"tabs",children:[e.jsx("button",{type:"button",className:`tab ${p==="manual"?"active":""}`,onClick:()=>C("manual"),children:"Nháº­p Thá»§ CÃ´ng"}),e.jsx("button",{type:"button",className:`tab ${p==="upload"?"active":""}`,onClick:()=>C("upload"),children:"Upload File"})]}),p==="upload"&&e.jsxs("div",{className:"upload-section",children:[e.jsxs("button",{type:"button",className:"download-template-btn",onClick:M,children:[e.jsx(V,{})," Táº£i Máº«u File CSV"]}),e.jsxs("div",{className:"upload-area",children:[e.jsx("input",{type:"file",accept:".csv",onChange:H,id:"file-upload",hidden:!0}),e.jsxs("label",{htmlFor:"file-upload",className:"upload-label",children:[e.jsx(G,{}),e.jsx("span",{children:"Chá»n file CSV Ä‘á»ƒ upload"}),e.jsx("small",{children:"Äá»‹nh dáº¡ng: STT, Há» vÃ  TÃªn, Size, Sá»‘ LÆ°á»£ng"})]})]})]}),e.jsxs("div",{className:"order-items-table",children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"STT"}),e.jsx("th",{children:"Há» vÃ  TÃªn"}),e.jsx("th",{children:"Size"}),e.jsx("th",{children:"Sá»‘ LÆ°á»£ng"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:r.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:n+1}),e.jsx("td",{children:e.jsx("input",{type:"text",value:s.name,onChange:a=>j(s.id,"name",a.target.value),placeholder:"Nháº­p tÃªn",className:"name-input"})}),e.jsx("td",{children:e.jsxs("select",{value:s.size,onChange:a=>j(s.id,"size",a.target.value),className:"size-select",children:[e.jsx("option",{value:"S",children:"S"}),e.jsx("option",{value:"M",children:"M"}),e.jsx("option",{value:"L",children:"L"}),e.jsx("option",{value:"XL",children:"XL"}),e.jsx("option",{value:"XXL",children:"XXL"})]})}),e.jsx("td",{children:e.jsx("input",{type:"number",value:s.quantity,onChange:a=>j(s.id,"quantity",a.target.value),min:"1",className:"qty-input"})}),e.jsx("td",{children:e.jsx("button",{type:"button",onClick:()=>I(s.id),className:"remove-btn",disabled:r.length===1,children:e.jsx(E,{})})})]},s.id))})]}),e.jsxs("button",{type:"button",onClick:F,className:"add-item-btn",children:[e.jsx(X,{})," ThÃªm dÃ²ng"]})]}),e.jsxs("div",{className:"size-summary",children:[e.jsx("h4",{children:"Tá»•ng há»£p theo size:"}),e.jsx("div",{className:"size-tags",children:Object.entries(z()).map(([s,n])=>e.jsxs("span",{className:"size-tag",children:["Size ",s,": ",e.jsx("strong",{children:n})]},s))})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:"3. ThÃ´ng Tin LiÃªn Há»‡"}),e.jsxs("div",{className:"contact-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["TÃªn lá»›p ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",value:l.className,onChange:s=>i("className",s.target.value),placeholder:"VD: 12A1",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"TrÆ°á»ng há»c"}),e.jsx("input",{type:"text",value:l.schoolName,onChange:s=>i("schoolName",s.target.value),placeholder:"TÃªn trÆ°á»ng"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["NgÆ°á»i liÃªn há»‡ ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",value:l.contactPerson,onChange:s=>i("contactPerson",s.target.value),placeholder:"Há» vÃ  tÃªn",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Sá»‘ Ä‘iá»‡n thoáº¡i ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"tel",value:l.phone,onChange:s=>i("phone",s.target.value),placeholder:"0987654321",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:l.email,onChange:s=>i("email",s.target.value),placeholder:"email@example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Äá»‹a chá»‰ giao hÃ ng"}),e.jsx("input",{type:"text",value:l.address,onChange:s=>i("address",s.target.value),placeholder:"Äá»‹a chá»‰ chi tiáº¿t"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ghi chÃº thÃªm"}),e.jsx("textarea",{value:l.notes,onChange:s=>i("notes",s.target.value),placeholder:"YÃªu cáº§u Ä‘áº·c biá»‡t, thá»i gian giao hÃ ng mong muá»‘n...",rows:"4"})]})]})]})]}),e.jsx("div",{className:"order-summary",children:e.jsxs("div",{className:"summary-card sticky",children:[e.jsx("h3",{children:"Tá»•ng Quan ÄÆ¡n HÃ ng"}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Sáº£n pháº©m:"}),e.jsx("strong",{children:(t==null?void 0:t.name)||"ChÆ°a chá»n"})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Tá»•ng sá»‘ lÆ°á»£ng:"}),e.jsxs("strong",{className:"highlight",children:[c()," sáº£n pháº©m"]})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Táº¡m tÃ­nh:"}),e.jsx("span",{children:h(u())})]}),x()>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-row discount",children:[e.jsxs("span",{children:["Giáº£m giÃ¡ (",(g(c())*100).toFixed(0),"%):"]}),e.jsxs("span",{className:"discount-amount",children:["-",h(x())]})]}),e.jsxs("div",{className:"discount-note",children:["ğŸ‰ Báº¡n Ä‘Ã£ Ä‘Æ°á»£c giáº£m giÃ¡"," ",(g(c())*100).toFixed(0),"%"]})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"summary-row total",children:[e.jsx("span",{children:"Tá»•ng cá»™ng:"}),e.jsx("strong",{className:"total-amount",children:h(w())})]}),e.jsxs("button",{type:"submit",className:"submit-btn",children:[e.jsx(A,{})," Gá»­i ÄÆ¡n Äáº·t HÃ ng"]}),e.jsxs("div",{className:"summary-notes",children:[e.jsx("p",{children:"âœ“ Miá»…n phÃ­ váº­n chuyá»ƒn vá»›i Ä‘Æ¡n tá»« 20 sáº£n pháº©m"}),e.jsx("p",{children:"âœ“ TÆ° váº¥n thiáº¿t káº¿ miá»…n phÃ­"}),e.jsx("p",{children:"âœ“ Há»— trá»£ in logo/slogan"})]})]})})]})})})})]})})}export{Z as default};
