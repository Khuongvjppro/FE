import{r as s,j as a,L as f}from"./index-B5h6h-9G.js";function h({src:e,alt:c,className:o,placeholder:n="/images/placeholder.png"}){const[l,i]=s.useState(n),[d,u]=s.useState(!1),t=s.useRef();return s.useEffect(()=>{let r;return t.current&&(r=new IntersectionObserver(m=>{m.forEach(g=>{g.isIntersecting&&(i(e),r.unobserve(t.current))})},{rootMargin:"50px"}),r.observe(t.current)),()=>{r&&t.current&&r.unobserve(t.current)}},[e]),a.jsx("img",{ref:t,src:l,alt:c,className:`lazy-image ${d?"loaded":"loading"} ${o||""}`,onLoad:()=>u(!0)})}function x({product:e}){const c=o=>({"ao-lop-co-co":"Áo Polo","ao-lop-so-mi":"Sơ mi Oxford","ao-lop-thun":"T-shirt Wash","ao-lop-thun-cotton":"Áo Thun Cotton"})[o]||o;return a.jsx(f,{to:`/product/${e.id}`,className:"product-card-wrapper",children:a.jsxs("div",{className:"product-card",children:[a.jsx("div",{className:"product-image",children:a.jsx(h,{src:e.image,alt:e.name})}),a.jsxs("div",{className:"product-info",children:[a.jsx("div",{className:"product-category",children:c(e.category)}),a.jsx("h3",{className:"product-name",children:e.name})]})]})})}const j=(e,c=[])=>{const[o,n]=s.useState(null),[l,i]=s.useState(!0),[d,u]=s.useState(null),t=async()=>{try{i(!0),u(null);const r=await e();n(r.data)}catch(r){u(r.message||"An error occurred"),console.error("Fetch error:",r)}finally{i(!1)}};return s.useEffect(()=>{t()},c),{data:o,loading:l,error:d,refetch:t}};export{x as P,j as u};
