import{d as O,e as P,r as l,j as s}from"./index-DOtLR8K3.js";import{M as T}from"./MainLayout-eVY6jrbG.js";import{s as j,g as b,t as w,u as H,v as I,w as M,x as $,l as q,y as z,z as J}from"./index-Ds_4FkcQ.js";import"./Footer-Ca-AJE9O.js";function R(){var N;const{user:i,logout:C}=O(),p=P(),[t,x]=l.useState("info"),[o,m]=l.useState(!1),[u,S]=l.useState([]),[a,g]=l.useState({name:((N=i==null?void 0:i.email)==null?void 0:N.split("@")[0])||"Người dùng",email:(i==null?void 0:i.email)||"",phone:"",address:"",avatar:""}),[n,c]=l.useState(a);l.useEffect(()=>{const e=localStorage.getItem("userProfile");if(e){const d=JSON.parse(e);g(d),c(d)}const r=localStorage.getItem("orderHistory");r&&S(JSON.parse(r))},[]);const y=()=>{C(),p("/")},k=()=>{g(n),localStorage.setItem("userProfile",JSON.stringify(n)),m(!1)},F=()=>{c(a),m(!1)},v=e=>{switch(e){case"completed":return"#43a047";case"processing":return"#fb8c00";case"pending":return"#fdd835";case"cancelled":return"#e53935";default:return"#666"}},E=e=>{switch(e){case"completed":return"Đã giao";case"processing":return"Đang xử lý";case"pending":return"Chờ xác nhận";case"cancelled":return"Đã hủy";default:return e}};return s.jsx(T,{children:s.jsxs("div",{className:"profile-container",children:[s.jsxs("div",{className:"profile-header",children:[s.jsx("div",{className:"profile-avatar",children:a.avatar?s.jsx("img",{src:a.avatar,alt:a.name}):s.jsx("div",{className:"avatar-placeholder",children:s.jsx(j,{size:48})})}),s.jsxs("div",{className:"profile-header-info",children:[s.jsx("h1",{children:a.name}),s.jsx("p",{children:a.email})]})]}),s.jsxs("div",{className:"profile-content",children:[s.jsxs("div",{className:"profile-tabs",children:[s.jsxs("button",{className:`tab-button ${t==="info"?"active":""}`,onClick:()=>x("info"),children:[s.jsx(j,{})," Thông tin cá nhân"]}),s.jsxs("button",{className:`tab-button ${t==="orders"?"active":""}`,onClick:()=>x("orders"),children:[s.jsx(b,{})," Đơn hàng của tôi"]}),s.jsxs("button",{className:`tab-button ${t==="settings"?"active":""}`,onClick:()=>x("settings"),children:[s.jsx(w,{})," Cài đặt"]})]}),s.jsxs("div",{className:"profile-tab-content",children:[t==="info"&&s.jsxs("div",{className:"tab-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx("h2",{children:"Thông tin cá nhân"}),o?s.jsxs("div",{className:"edit-actions",children:[s.jsxs("button",{className:"btn-save",onClick:k,children:[s.jsx(I,{})," Lưu"]}),s.jsxs("button",{className:"btn-cancel",onClick:F,children:[s.jsx(M,{})," Hủy"]})]}):s.jsxs("button",{className:"btn-edit",onClick:()=>m(!0),children:[s.jsx(H,{})," Chỉnh sửa"]})]}),s.jsxs("div",{className:"info-grid",children:[s.jsxs("div",{className:"info-item",children:[s.jsxs("label",{children:[s.jsx(j,{})," Họ và tên"]}),o?s.jsx("input",{type:"text",value:n.name,onChange:e=>c({...n,name:e.target.value})}):s.jsx("p",{children:a.name})]}),s.jsxs("div",{className:"info-item",children:[s.jsxs("label",{children:[s.jsx($,{})," Email"]}),s.jsx("p",{children:a.email})]}),s.jsxs("div",{className:"info-item",children:[s.jsxs("label",{children:[s.jsx(q,{})," Số điện thoại"]}),o?s.jsx("input",{type:"tel",value:n.phone,onChange:e=>c({...n,phone:e.target.value}),placeholder:"Nhập số điện thoại"}):s.jsx("p",{children:a.phone||"Chưa cập nhật"})]}),s.jsxs("div",{className:"info-item full-width",children:[s.jsxs("label",{children:[s.jsx(z,{})," Địa chỉ"]}),o?s.jsx("textarea",{value:n.address,onChange:e=>c({...n,address:e.target.value}),placeholder:"Nhập địa chỉ",rows:"3"}):s.jsx("p",{children:a.address||"Chưa cập nhật"})]})]})]}),t==="orders"&&s.jsxs("div",{className:"tab-panel",children:[s.jsx("h2",{children:"Lịch sử đơn hàng"}),u.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(b,{size:64,color:"#ccc"}),s.jsx("h3",{children:"Chưa có đơn hàng nào"}),s.jsx("p",{children:"Bạn chưa có đơn hàng nào. Hãy mua sắm ngay!"}),s.jsx("button",{className:"btn-primary",onClick:()=>p("/products"),children:"Khám phá sản phẩm"})]}):s.jsx("div",{className:"orders-list",children:u.map(e=>{var r,d;return s.jsxs("div",{className:"order-card",children:[s.jsxs("div",{className:"order-header",children:[s.jsxs("div",{children:[s.jsxs("h3",{children:["Đơn hàng #",e.id]}),s.jsx("p",{className:"order-date",children:e.date})]}),s.jsx("span",{className:"order-status",style:{color:v(e.status),background:`${v(e.status)}15`},children:E(e.status)})]}),s.jsx("div",{className:"order-items",children:(r=e.items)==null?void 0:r.map((h,L)=>{var f;return s.jsxs("div",{className:"order-item",children:[s.jsx("img",{src:h.image||"/public/images/no-image.png",alt:h.name}),s.jsxs("div",{className:"order-item-info",children:[s.jsx("p",{className:"item-name",children:h.name}),s.jsxs("p",{className:"item-quantity",children:["SL: ",h.quantity]})]}),s.jsxs("p",{className:"item-price",children:[(f=h.price)==null?void 0:f.toLocaleString(),"₫"]})]},L)})}),s.jsxs("div",{className:"order-total",children:[s.jsx("strong",{children:"Tổng cộng:"}),s.jsxs("strong",{className:"total-price",children:[(d=e.total)==null?void 0:d.toLocaleString(),"₫"]})]})]},e.id)})})]}),t==="settings"&&s.jsxs("div",{className:"tab-panel",children:[s.jsx("h2",{children:"Cài đặt tài khoản"}),s.jsxs("div",{className:"settings-list",children:[s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"Thông báo qua email"}),s.jsx("p",{children:"Nhận thông báo về đơn hàng và khuyến mãi"})]}),s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0}),s.jsx("span",{className:"slider"})]})]}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"Nhận tin khuyến mãi"}),s.jsx("p",{children:"Nhận thông tin về các chương trình ưu đãi"})]}),s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0}),s.jsx("span",{className:"slider"})]})]}),s.jsxs("div",{className:"setting-item danger",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"Đăng xuất"}),s.jsx("p",{children:"Thoát khỏi tài khoản của bạn"})]}),s.jsxs("button",{className:"btn-logout",onClick:y,children:[s.jsx(J,{})," Đăng xuất"]})]})]})]})]})]})]})})}export{R as default};
