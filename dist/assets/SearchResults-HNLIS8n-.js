import{u as k,r as c,d as b,j as e,e as y}from"./index-DxTk0xe3.js";import{p as T}from"./api-noOrG1dB.js";import{P as q}from"./ProductCard-CH0ECgca.js";import{h as x}from"./index-D5hZmU8V.js";function L(){const[t,j]=k(),[l,d]=c.useState(t.get("q")||""),[m,u]=c.useState([]),[n,h]=c.useState([]),[i,p]=c.useState(!1),[o,g]=c.useState("default"),v=b();c.useEffect(()=>{const s=t.get("q");s&&(d(s),f(s))},[t]),c.useEffect(()=>{S()},[o,m]);const f=async s=>{if(s.trim()){p(!0);try{const a=await T.search(s);u(a.data),h(a.data)}catch(a){console.error("Lỗi khi tìm kiếm:",a),u([]),h([])}finally{p(!1)}}},N=s=>{s.preventDefault(),l.trim()&&j({q:l})},S=()=>{let s=[...m];switch(o){case"price-asc":s.sort((a,r)=>a.price-r.price);break;case"price-desc":s.sort((a,r)=>r.price-a.price);break;case"name-asc":s.sort((a,r)=>a.name.localeCompare(r.name,"vi"));break;case"name-desc":s.sort((a,r)=>r.name.localeCompare(a.name,"vi"));break}h(s)};return e.jsx("div",{className:"search-results-page",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"search-section",children:e.jsx("form",{onSubmit:N,className:"search-form",children:e.jsxs("div",{className:"search-input-group",children:[e.jsx(x,{className:"search-form-icon"}),e.jsx("input",{type:"text",className:"search-form-input",placeholder:"Tìm kiếm sản phẩm...",value:l,onChange:s=>d(s.target.value)}),e.jsx("button",{type:"submit",className:"search-form-btn",children:"Tìm kiếm"})]})})}),!i&&e.jsxs("div",{className:"results-header",children:[e.jsx("h1",{className:"results-title",children:n.length>0?e.jsxs(e.Fragment,{children:["Tìm thấy ",e.jsx("span",{children:n.length}),' kết quả cho "',t.get("q"),'"']}):e.jsxs(e.Fragment,{children:['Không tìm thấy kết quả cho "',t.get("q"),'"']})}),n.length>0&&e.jsx("div",{className:"results-controls",children:e.jsxs("select",{value:o,onChange:s=>g(s.target.value),className:"sort-select",children:[e.jsx("option",{value:"default",children:"Mặc định"}),e.jsx("option",{value:"price-asc",children:"Giá: Thấp đến Cao"}),e.jsx("option",{value:"price-desc",children:"Giá: Cao đến Thấp"}),e.jsx("option",{value:"name-asc",children:"Tên: A-Z"}),e.jsx("option",{value:"name-desc",children:"Tên: Z-A"})]})})]}),i&&e.jsx("div",{className:"loading-container",children:e.jsx(y,{})}),!i&&n.length>0&&e.jsx("div",{className:"results-grid",children:n.map(s=>e.jsx(q,{product:s},s.id))}),!i&&n.length===0&&t.get("q")&&e.jsxs("div",{className:"no-results-container",children:[e.jsx("div",{className:"no-results-icon",children:e.jsx(x,{size:64})}),e.jsx("h2",{children:"Không tìm thấy sản phẩm"}),e.jsxs("p",{children:['Rất tiếc, chúng tôi không tìm thấy sản phẩm nào phù hợp với từ khóa "',t.get("q"),'"']}),e.jsxs("div",{className:"no-results-suggestions",children:[e.jsx("h3",{children:"Gợi ý:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Kiểm tra lại chính tả từ khóa"}),e.jsx("li",{children:"Thử sử dụng từ khóa khác"}),e.jsx("li",{children:"Sử dụng từ khóa chung chung hơn"})]})]}),e.jsx("button",{className:"back-to-products-btn",onClick:()=>v("/products"),children:"Xem tất cả sản phẩm"})]})]})})}export{L as default};
