import{a as H,r as c,b as B,A as F,c as A,j as s,L as M}from"./index-DOtLR8K3.js";import{a as I,H as N,F as O}from"./Footer-Ca-AJE9O.js";import{a as l,F as r,d as U,e as G,f as Z}from"./index-Ds_4FkcQ.js";function W(){var w,P,T,$;const{id:x}=H(),[a,D]=c.useState(null),[g,q]=c.useState([]),[v,z]=c.useState(0),[d,b]=c.useState(null),[t,f]=c.useState(null),[h,j]=c.useState(1),[n,p]=c.useState("description"),[R,C]=c.useState(!0),[K,Q]=c.useState(!1),[y,S]=c.useState(!1),{addToCart:_}=B();c.useEffect(()=>{L(),E()},[x]);const L=async()=>{var e,i;try{const u=(await I.get(`${F}${A.PRODUCTS}/${x}`)).data;D(u),b(((e=u.sizes)==null?void 0:e[0])||null),f(((i=u.colors)==null?void 0:i[0])||null),C(!1)}catch(m){console.error("Lỗi khi tải sản phẩm:",m),C(!1)}},E=async()=>{try{const i=(await I.get(`${F}${A.PRODUCTS}`)).data.filter(m=>m.id!==parseInt(x)).slice(0,4);q(i)}catch(e){console.error("Lỗi khi tải sản phẩm liên quan:",e)}},V=()=>{if(!d||!t){alert("Vui lòng chọn size và màu sắc!");return}_(a,h,d,t),S(!0),setTimeout(()=>{S(!1)},2e3)},o=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);if(R)return s.jsxs("div",{className:"app",children:[s.jsx(N,{}),s.jsx("div",{className:"loading",children:"Đang tải..."})]});if(!a)return s.jsxs("div",{className:"app",children:[s.jsx(N,{}),s.jsx("div",{className:"not-found",children:"Không tìm thấy sản phẩm"})]});const k=a.images||[a.image,a.image,a.image,a.image];return s.jsxs("div",{className:"app",children:[s.jsx(N,{}),s.jsx("div",{className:"breadcrumb",children:s.jsxs("div",{className:"container",children:[s.jsx(M,{to:"/",children:"Trang chủ"}),s.jsx("span",{children:" › "}),s.jsx("span",{children:"Màu"}),s.jsx("span",{children:" › "}),s.jsx("span",{children:"Áo lớp màu xám"}),s.jsx("span",{children:" › "}),s.jsx("span",{className:"current",children:a.name})]})}),s.jsx("div",{className:"product-detail-container",children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"product-detail-grid",children:[s.jsxs("div",{className:"product-images",children:[s.jsx("div",{className:"main-image",children:s.jsx("img",{src:k[v],alt:a.name})}),s.jsx("div",{className:"thumbnail-list",children:k.map((e,i)=>s.jsx("div",{className:`thumbnail ${v===i?"active":""}`,onClick:()=>z(i),children:s.jsx("img",{src:e,alt:`${a.name} ${i+1}`})},i))})]}),s.jsxs("div",{className:"product-info-detail",children:[s.jsx("h1",{className:"product-title",children:a.name}),s.jsxs("div",{className:"product-rating",children:[s.jsx("div",{className:"stars",children:[...Array(5)].map((e,i)=>s.jsx(l,{className:i<Math.floor(a.rating||0)?"star-filled":"star-empty"},i))}),s.jsxs("span",{className:"rating-text",children:[a.rating," (",a.reviews," đánh giá)"]})]}),s.jsxs("div",{className:"product-price-section",children:[s.jsx("div",{className:"price-main",children:o(a.price)}),a.originalPrice&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"price-original",children:o(a.originalPrice)}),s.jsxs("div",{className:"price-discount",children:["-",Math.round((a.originalPrice-a.price)/a.originalPrice*100),"%"]})]})]}),s.jsx("div",{className:"product-description",children:s.jsx("p",{children:a.description})}),s.jsxs("div",{className:"product-option-group",children:[s.jsxs("label",{className:"option-label",children:["Chọn Size: ",s.jsx("strong",{children:d})]}),s.jsx("div",{className:"size-options",children:(w=a.sizes)==null?void 0:w.map(e=>s.jsx("button",{className:`size-btn ${d===e?"active":""}`,onClick:()=>b(e),children:e},e))})]}),s.jsxs("div",{className:"product-option-group",children:[s.jsxs("label",{className:"option-label",children:["Chọn Màu: ",s.jsx("strong",{children:t})]}),s.jsx("div",{className:"color-options-new",children:(P=a.colors)==null?void 0:P.map((e,i)=>s.jsxs("button",{className:`color-btn ${t===e?"active":""}`,onClick:()=>f(e),children:[e,t===e&&s.jsx(r,{className:"check-icon"})]},i))})]}),s.jsxs("div",{className:"product-option-group",children:[s.jsx("label",{className:"option-label",children:"Số lượng:"}),s.jsxs("div",{className:"quantity-selector",children:[s.jsx("button",{className:"qty-btn",onClick:()=>j(Math.max(1,h-1)),children:"-"}),s.jsx("input",{type:"number",value:h,onChange:e=>j(Math.max(1,parseInt(e.target.value)||1)),min:"1"}),s.jsx("button",{className:"qty-btn",onClick:()=>j(h+1),children:"+"})]}),s.jsxs("span",{className:"stock-status",children:[s.jsx(r,{})," Còn ",a.stock," sản phẩm"]})]}),s.jsxs("div",{className:"product-actions-new",children:[s.jsx("button",{className:`btn-add-cart ${y?"added":""}`,onClick:V,children:y?s.jsxs(s.Fragment,{children:[s.jsx(r,{})," Đã thêm vào giỏ"]}):s.jsxs(s.Fragment,{children:[s.jsx(U,{})," Thêm vào giỏ hàng"]})}),s.jsx("button",{className:"btn-icon-action",title:"Yêu thích",children:s.jsx(G,{})}),s.jsx("button",{className:"btn-icon-action",title:"Chia sẻ",children:s.jsx(Z,{})})]}),s.jsxs("div",{className:"product-features",children:[s.jsxs("div",{className:"feature-item",children:[s.jsx(r,{className:"feature-icon"}),s.jsx("span",{children:"Miễn phí vận chuyển với đơn trên 500k"})]}),s.jsxs("div",{className:"feature-item",children:[s.jsx(r,{className:"feature-icon"}),s.jsx("span",{children:"Đổi trả trong 7 ngày"})]}),s.jsxs("div",{className:"feature-item",children:[s.jsx(r,{className:"feature-icon"}),s.jsx("span",{children:"Bảo hành chính hãng"})]})]})]})]}),s.jsxs("div",{className:"product-tabs",children:[s.jsxs("div",{className:"tabs-header",children:[s.jsx("button",{className:`tab-btn ${n==="description"?"active":""}`,onClick:()=>p("description"),children:"Mô tả sản phẩm"}),s.jsx("button",{className:`tab-btn ${n==="specs"?"active":""}`,onClick:()=>p("specs"),children:"Thông số kỹ thuật"}),s.jsxs("button",{className:`tab-btn ${n==="reviews"?"active":""}`,onClick:()=>p("reviews"),children:["Đánh giá (",a.reviews,")"]})]}),s.jsxs("div",{className:"tabs-content",children:[n==="description"&&s.jsxs("div",{className:"tab-panel fade-in",children:[s.jsx("h3",{children:"Mô tả chi tiết"}),s.jsx("p",{children:a.description}),s.jsxs("ul",{children:[s.jsx("li",{children:"Chất liệu: Cotton cao cấp, thoáng mát"}),s.jsx("li",{children:"Form áo: Regular fit, phù hợp mọi dáng người"}),s.jsx("li",{children:"Màu sắc: Đa dạng, không phai màu sau giặt"}),s.jsx("li",{children:"Thiết kế: Hiện đại, trẻ trung, phù hợp làm đồng phục lớp"}),s.jsx("li",{children:"Dễ dàng in ấn logo, hình ảnh theo yêu cầu"})]})]}),n==="specs"&&s.jsxs("div",{className:"tab-panel fade-in",children:[s.jsx("h3",{children:"Thông số kỹ thuật"}),s.jsx("table",{className:"specs-table",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:"Danh mục:"})}),s.jsx("td",{children:a.category})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:"Chất liệu:"})}),s.jsx("td",{children:"Cotton 100%"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:"Sizes:"})}),s.jsx("td",{children:(T=a.sizes)==null?void 0:T.join(", ")})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:"Màu sắc:"})}),s.jsx("td",{children:($=a.colors)==null?void 0:$.join(", ")})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:"Xuất xứ:"})}),s.jsx("td",{children:"Việt Nam"})]})]})})]}),n==="reviews"&&s.jsxs("div",{className:"tab-panel fade-in",children:[s.jsx("h3",{children:"Đánh giá từ khách hàng"}),s.jsx("div",{className:"reviews-summary",children:s.jsxs("div",{className:"rating-score",children:[s.jsx("div",{className:"score",children:a.rating}),s.jsx("div",{className:"stars-large",children:[...Array(5)].map((e,i)=>s.jsx(l,{className:i<Math.floor(a.rating)?"star-filled":"star-empty"},i))}),s.jsxs("div",{className:"reviews-count",children:[a.reviews," đánh giá"]})]})}),s.jsxs("div",{className:"review-item",children:[s.jsxs("div",{className:"review-header",children:[s.jsx("strong",{children:"Nguyễn Văn A"}),s.jsx("div",{className:"review-stars",children:[...Array(5)].map((e,i)=>s.jsx(l,{className:"star-filled"},i))})]}),s.jsx("p",{children:"Chất lượng áo rất tốt, màu sắc đẹp, phù hợp làm đồng phục lớp. Giao hàng nhanh!"})]}),s.jsxs("div",{className:"review-item",children:[s.jsxs("div",{className:"review-header",children:[s.jsx("strong",{children:"Trần Thị B"}),s.jsxs("div",{className:"review-stars",children:[[...Array(4)].map((e,i)=>s.jsx(l,{className:"star-filled"},i)),s.jsx(l,{className:"star-empty"})]})]}),s.jsx("p",{children:"Áo đẹp, form chuẩn. Giá cả hợp lý. Sẽ quay lại ủng hộ shop!"})]})]})]})]}),g.length>0&&s.jsxs("div",{className:"related-products",children:[s.jsx("h2",{children:"Sản phẩm liên quan"}),s.jsx("div",{className:"related-products-grid",children:g.map(e=>s.jsxs(M,{to:`/product/${e.id}`,className:"related-product-card",children:[s.jsx("div",{className:"related-product-image",children:s.jsx("img",{src:e.image,alt:e.name})}),s.jsxs("div",{className:"related-product-info",children:[s.jsx("h4",{children:e.name}),s.jsxs("div",{className:"related-price",children:[s.jsx("span",{className:"price",children:o(e.price)}),e.originalPrice&&s.jsx("span",{className:"price-old",children:o(e.originalPrice)})]})]})]},e.id))})]})]})}),s.jsx(O,{})]})}export{W as default};
