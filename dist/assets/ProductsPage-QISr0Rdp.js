import{r as c,j as e,u as R,L as B,C as y}from"./index-DxTk0xe3.js";import{M as D}from"./MainLayout-DgkZXi5D.js";import{P as A}from"./ProductCard-CH0ECgca.js";import{u as H}from"./index-byQ3dCpT.js";import{p as U}from"./api-noOrG1dB.js";import"./Footer-CbZBdzb-.js";import"./index-D5hZmU8V.js";function q({onFilterChange:r}){const[g,d]=c.useState(""),x=o=>{d(o),r({searchTerm:o})},i=()=>{d(""),r({searchTerm:""})};return e.jsxs("div",{className:"product-filter",children:[e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{children:"Tìm kiếm"}),e.jsx("input",{type:"text",placeholder:"Tìm sản phẩm...",value:g,onChange:o=>x(o.target.value),className:"filter-search"})]}),e.jsx("button",{onClick:i,className:"filter-reset-btn",children:"Xóa tìm kiếm"})]})}function Q(){const[r,g]=R(),d=r.get("category")||"all",x=r.get("subcategory")||null,[i,o]=c.useState(d),[h,k]=c.useState([]),[N,S]=c.useState({}),[l,m]=c.useState(x),[j,L]=c.useState(""),[n,T]=c.useState(1),b=9,{data:f,loading:v}=H(()=>U.getAll(),[]);c.useEffect(()=>{const s=r.get("category"),a=r.get("subcategory");s&&o(s),m(a||null)},[r]),c.useEffect(()=>{if(f){let s=[...f];i!=="all"&&(s=s.filter(a=>a.category===i)),l&&(s=s.filter(a=>a.subcategory===l)),j&&(s=s.filter(a=>a.name.toLowerCase().includes(j.toLowerCase()))),k(s),T(1)}},[f,i,l,j]);const F=s=>{S(a=>({...a,[s]:!a[s]}))},w=s=>{L(s.searchTerm||"")},E=()=>{if(i==="all")return"Sản phẩm bán chạy";const s=y.find(a=>a.id===i);return s?s.name:"Sản phẩm bán chạy"},C=n*b,M=C-b,O=h.slice(M,C),u=Math.ceil(h.length/b),P=s=>{T(s),window.scrollTo({top:0,behavior:"smooth"})},p={"ao-phong-lop":["T-shirt cổ V","T-shirt Raglan","T-shirt Ringer Tee","T-shirt Basic","T-shirt Oversize","T-shirt Galaxy","T-shirt Pattern"],"ao-lop-co-co":["Polo cổ Zip","Polo mix màu","Polo Mix cổ V","Polo Basic","Polo Oversize","Polo Tartan","Polo Uni","Polo Lacoste Panu","Polo cổ tàu"],"ao-lop-so-mi":["Sơ mi Hàn Quốc","Sơ mi Tie Dye","Sơ mi 3D","Sơ mi Tartan"],"dong-phuc-mua-dong":["Áo gió Mix màu","Áo gió Basic","Áo khoác lớp","Áo lớp Hoodie","Áo lớp Sweater","Polo Sweatshirt"],mau:["Áo lớp màu hồng","Áo lớp màu xanh dương","Áo lớp màu xanh","Áo lớp màu tím","Áo lớp màu đen","Áo lớp màu xám","Áo lớp màu trắng","Áo lớp màu đỏ","Áo lớp màu cam","Áo lớp màu vàng","Áo lớp màu be","Áo lớp màu nâu"],bst:["Áo lớp phản quang","Áo lớp chất ngầu cá tính","Áo lớp đơn giản","Áo lớp Phi hành gia","Áo lớp 12 con giáp","Áo lớp chuyên","Áo lớp 3D","Áo lớp dạ quang","Áo lớp Typography","Áo lớp dễ thương Chibi"]};return e.jsx(D,{children:e.jsxs("div",{className:"products-page",children:[e.jsx("div",{className:"products-banner",children:e.jsxs("div",{className:"banner-content",children:[e.jsx("h1",{children:"Tất cả sản phẩm"}),e.jsxs("div",{className:"breadcrumb",children:[e.jsx(B,{to:"/",children:"Trang chủ"})," > ",e.jsx("span",{children:"Tất cả sản phẩm"})]}),e.jsx("div",{className:"hashtag",children:"#dongphucpanda"})]})}),e.jsxs("div",{className:"products-container",children:[e.jsxs("aside",{className:"products-sidebar",children:[e.jsx("h3",{className:"sidebar-title",children:"LỌC SẢN PHẨM"}),e.jsx(q,{onFilterChange:w}),e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{style:{marginTop:"20px",marginBottom:"10px"},children:"Danh mục chi tiết"}),e.jsx("ul",{className:"category-list",children:y.map(s=>e.jsxs("li",{className:"category-item",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("span",{className:i===s.id?"active":"",onClick:()=>{o(s.id),g({category:s.id}),m(null),p[s.id]&&S(a=>({...a,[s.id]:!0}))},children:s.name}),p[s.id]&&e.jsx("button",{className:`toggle-btn ${N[s.id]?"expanded":""}`,onClick:()=>F(s.id),children:"›"})]}),p[s.id]&&N[s.id]&&e.jsx("ul",{className:"subcategory-list",children:p[s.id].map((a,t)=>e.jsx("li",{children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:l===a,onChange:()=>{m(l===a?null:a)}}),e.jsx("span",{children:a})]})},t))})]},s.id))})]})]}),e.jsxs("div",{className:"products-content",children:[e.jsx("div",{className:"products-header",children:e.jsxs("h2",{children:[E()," (",h.length," Sản phẩm)"]})}),v?e.jsx("div",{className:"loading",children:"Đang tải sản phẩm..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"products-grid",children:O.map(s=>e.jsx(A,{product:s},s.id))}),u>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"pagination-btn prev-btn",onClick:()=>P(n-1),disabled:n===1,children:"‹ Trước"}),e.jsx("div",{className:"pagination-numbers",children:[...Array(u)].map((s,a)=>{const t=a+1;return t===1||t===u||t>=n-1&&t<=n+1?e.jsx("button",{className:`pagination-btn page-number ${n===t?"active":""}`,onClick:()=>P(t),children:t},t):t===n-2||t===n+2?e.jsx("span",{className:"pagination-dots",children:"..."},t):null})}),e.jsx("button",{className:"pagination-btn next-btn",onClick:()=>P(n+1),disabled:n===u,children:"Sau ›"})]})]}),h.length===0&&!v&&e.jsx("div",{className:"no-products",children:"Không có sản phẩm nào trong danh mục này"})]})]})]})})}export{Q as default};
